# Техническое Задание (ТЗ): Система Тегов (Tag System)

## 1. Общее описание

Необходимо разработать систему компонентов для работы с тегами (tags/chips). Система должна включать визуальный примитив для отображения тегов и сложный компонент ввода (input) для управления списком тегов.

Компоненты должны соответствовать общему дизайн-коду проекта (Aurora Admin), поддерживать темизацию и быть доступными (accessibility).

---

## 2. Компонент: `av-tag` (Отображение)

### 2.1. Назначение

Базовый UI-элемент для отображения меток, категорий, статусов и фильтров. Может быть интерактивным (удаляемым или кликабельным).

### 2.2. API Компонента (Inputs)

| Свойство    | Тип                                                                               | Default     | Описание                                          |
| ----------- | --------------------------------------------------------------------------------- | ----------- | ------------------------------------------------- |
| `label`     | `string`                                                                          | `''`        | Текст тега (если не используется ng-content)      |
| `size`      | `'small' \| 'medium' \| 'large'`                                                  | `'medium'`  | Размер компонента                                 |
| `variant`   | `'filled' \| 'outlined' \| 'soft'`                                                | `'soft'`    | Визуальный стиль                                  |
| `color`     | `'primary' \| 'success' \| 'warning' \| 'error' \| 'info' \| 'neutral' \| string` | `'neutral'` | Цветовая схема или кастомный цвет (HEX)           |
| `shape`     | `'rounded' \| 'pill'`                                                             | `'rounded'` | 'rounded' (R4-8px) или 'pill' (полное скругление) |
| `removable` | `boolean`                                                                         | `false`     | Показать иконку закрытия (X)                      |
| `clickable` | `boolean`                                                                         | `false`     | Добавляет hover-эффект и pointer                  |
| `icon`      | `string`                                                                          | `null`      | Имя иконки для отображения слева от текста        |

### 2.3. Events (Outputs)

- `clicked`: Emits при клике на тело тега (если `clickable: true`).
- `removed`: Emits при клике на крестик (если `removable: true`).

### 2.4. Дизайн-требования (Стили)

- **Typography**: Использовать мелкий кегль (text-xs / text-sm), шрифт Inter.
- **Icon size**: Адаптируется под размер текста (12px - 16px).
- **Transitions**: Плавное изменение цвета фона и border при наведении.
- **Dark Mode**: Полная поддержка темной темы (автоматическая инверсия или адаптация палитры).

---

## 3. Компонент: `av-tag-input` (Ввод)

### 3.1. Назначение

Компонент "поля ввода", который позволяет пользователю вводить несколько значений, разделяя их Enter или запятой. Введенные значения визуализируются как `av-tag` внутри поля.

### 3.2. Функциональность

1.  **Ввод текста**:
    - Пользователь печатает текст → нажимает `Enter`, `Comma` (,) или потерю фокуса (`Blur`) → текст превращается в чип.
    - Поле ввода очищается для следующего тега.
2.  **Удаление**:
    - Клик на крестик тега удаляет его.
    - Нажатие `Backspace` в пустом поле ввода удаляет (или выделяет для удаления) последний тег.
3.  **Валидация**:
    - Запрет дубликатов (опционально).
    - Минимальная/максимальная длина тега.
    - Максимальное количество тегов.

### 3.3. API Компонента (Inputs)

| Свойство          | Тип        | Default            | Описание                                                           |
| ----------------- | ---------- | ------------------ | ------------------------------------------------------------------ |
| `tags`            | `string[]` | `[]`               | Модель данных (v-model / ngModel)                                  |
| `placeholder`     | `string`   | `'Введите тег...'` | Текст placeholder (показывается, когда поле пустое или есть место) |
| `addOnKeys`       | `string[]` | `['Enter', ',']`   | Клавиши, вызывающие создание тега                                  |
| `allowDuplicates` | `boolean`  | `false`            | Разрешать ли одинаковые теги                                       |
| `maxTags`         | `number`   | `undefined`        | Лимит количества                                                   |
| `variant`         | ...        | `'soft'`           | Стиль тегов внутри инпута                                          |
| `disabled`        | `boolean`  | `false`            | Блокировка ввода                                                   |

### 3.4. Events (Outputs)

- `tagsChange`: Обновленный массив строк.
- `inputBlur`: При потере фокуса всем компонентом.

---

## 4. План реализации

### Этап 1: Дизайн-токены

- Определить палитру цветов для статусов (светлая/темная тема).
- `soft` стиль: фон с прозрачностью (opacity ~0.1-0.2) + насыщенный текст.
- `filled` стиль: насыщенный фон + белый текст.
- `outlined` стиль: прозрачный фон + цветной border + цветной текст.

### Этап 2: Базовый `av-tag`

- Создать компонент `TagComponent`.
- Внедрить поддержку `IconComponent` (существующий).
- Реализовать варианты стилей (SCSS mixins).

### Этап 3: `av-tag-input`

- Создать компонент-обертку.
- Использовать существующий стиль инпутов (чтобы выглядел как родной `av-input`).
- Реализовать логику обработки клавиатуры.
- Интегрировать `av-tag` внутрь.

### Этап 4: Демонстрация

- Создать страницу `Tag UI Demo` в структуре `ui-demo`.
- Реализовать примеры:
  - Коллекция бейджей (статусы заказов и т.д.).
  - Форма с вводом тегов (например, для статьи).
  - Динамическое переключение размеров и схем.

## 5. Примеры использования (Pseudocode)

```html
<!-- Просто бейдж статуса -->
<av-tag label="Active" color="success" variant="soft"></av-tag>

<!-- Интерактивный тег -->
<av-tag label="Angular" color="error" removable="true" (removed)="removeSkill('Angular')"> </av-tag>

<!-- Ввод тегов -->
<av-tag-input
  [(tags)]="articleTags"
  placeholder="Добавьте теги..."
  [maxTags]="5"
  [allowDuplicates]="false"
>
</av-tag-input>
```
